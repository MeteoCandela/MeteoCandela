/* poda.css — v2 (mòbil-first) */

.prune-card{ width:100%; }

/* Controls: 1 select ample + 2a fila (tipus + botó) */
.prune-head{ display:flex; flex-direction:column; gap:12px; }

.prune-controls{
  display:grid;
  grid-template-columns: 1fr;
  gap:10px;
}
.prune-controls .select{ width:100%; min-width:0; }
.prune-controls .btn{ width:100%; }

@media (min-width: 720px){
  .prune-controls{
    grid-template-columns: 280px 280px auto;
    align-items:center;
  }
  .prune-controls .btn{ width:auto; justify-self:start; }
}

/* Meteo pill slot */
.prune-meteo{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }

/* Llegenda compacta */
.prune-legend{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-top:6px;
}
.lg{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.04);
  font-size:13px; line-height:1;
}
.lg::before{ content:""; width:10px; height:10px; border-radius:999px; display:inline-block; }
.lg-winter::before{ background:#4f83ff; }
.lg-summer::before{ background:#ffbf3d; }
.lg-touch::before { background:#ff7a3d; }

/* Wrapper: més “card” i scroll suau */
.prune-grid{
  margin-top:12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.16);

  overflow:auto;
  -webkit-overflow-scrolling:touch;

  /* evita que la graella “es mengi” tota la pantalla */
  max-height: 62vh;
}

/* Grid */
.pg{
  min-width: 920px;
  display:grid;
  grid-template-columns: 200px repeat(12, 1fr); /* ← col. planta més estreta */
  gap:0;
}

/* Cells base */
.cell{
  padding:10px 10px;
  border-bottom:1px solid rgba(255,255,255,.07);
  border-right:1px solid rgba(255,255,255,.07);
  font-size:14px;
  line-height:1.15;
  background:transparent;
  color:rgba(255,255,255,.92);
}

/* Header sticky top */
.head{
  font-weight:800;
  background:rgba(255,255,255,.07);
  position:sticky;
  top:0;
  z-index:3;
  backdrop-filter: blur(6px);
}

/* Row header sticky left + ombra per separar */
.rowhead{
  font-weight:800;
  background:rgba(255,255,255,.06);
  position:sticky;
  left:0;
  z-index:2;
  backdrop-filter: blur(6px);
  box-shadow: 8px 0 14px rgba(0,0,0,.35);
}

/* Nota de planta: màxim 2 línies */
.rowhead .muted{
  opacity:.72;
  font-weight:500;
  font-size:12px;
  display:-webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow:hidden;
}

/* Centrat */
.dot{ display:flex; align-items:center; justify-content:center; }

/* Boxes: una mica més grans + més contrast */
.box{
  width:24px;
  height:24px;
  border-radius:8px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.06);
  box-shadow: 0 1px 0 rgba(0,0,0,.25);
}
.k-winter{ background:#4f83ff; border-color:rgba(255,255,255,.22); }
.k-summer{ background:#ffbf3d; border-color:rgba(255,255,255,.26); }
.k-touch { background:#ff7a3d; border-color:rgba(255,255,255,.26); }
.k-off   { background:rgba(255,255,255,.06); }
.k-dim   { opacity:.28; }

/* Notes */
.prune-notes{ margin-top:12px; }
.prune-notes summary{ cursor:pointer; font-weight:800; }
.prune-notes ul{ margin:10px 0 0 18px; }
.prune-notes li{ margin:6px 0; }
/* Notes expandibles dins la cel·la rowhead */
.rowhead .plant-title{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

.rowhead .plant-name{
  font-weight:800;
  min-width:0;
}

.rowhead .plant-info-btn{
  flex:0 0 auto;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(255,255,255,.06);
  color:rgba(255,255,255,.92);
  border-radius:999px;
  padding:6px 10px;
  font-size:12px;
  line-height:1;
}

.rowhead .plant-note{
  margin-top:8px;
  opacity:.75;
  font-weight:500;
  font-size:12px;

  /* plegat per defecte */
  display:-webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow:hidden;
}

.rowhead.is-open .plant-note{
  /* obert: deixa créixer */
  display:block;
  overflow:visible;
  -webkit-line-clamp: unset;
}

/* Opcional: petit “fade” quan està plegat (queda fi) */
.rowhead:not(.is-open) .plant-note{
  mask-image: linear-gradient(to right, #000 75%, transparent);
}
/* Millora sticky left perquè el botó Info no “floti” raro */
.rowhead{
  overflow:hidden; /* talla efectes quan es desplaça */
}

.rowhead .plant-title{
  position:relative;
}

/* Botó Info: més discret + no crida tant */
.rowhead .plant-info-btn{
  padding:6px 10px;
  border-radius:999px;
  background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.12);
  opacity:.9;
}

/* Quan es fa scroll horitzontal, dona un “tall” visual net */
.rowhead{
  box-shadow: 10px 0 18px rgba(0,0,0,.45);
}
/* Compacta la fila */
.pg .rowhead{
  padding:10px 10px;
}

.rowhead .plant-note{
  margin-top:6px;
  font-size:12px;
}

/* caixa més petita per reduir alçada visual */
.box{
  width:22px;
  height:22px;
  border-radius:7px;
}
/* 1) Assegura capes i que siguin OPACES (no transparents) */
.prune-grid{ position:relative; }

.pg .cell{
  position:relative;
}

/* Capçalera superior (mesos) */
.pg .head{
  position: sticky;
  top: 0;
  z-index: 40;
  background: #2b313b;            /* ← opac (ajusta si vols) */
  backdrop-filter: none !important;
}

/* Primera columna (Planta) sticky left */
.pg .rowhead{
  position: sticky;
  left: 0;
  z-index: 60;                     /* per sobre de la resta */
  background: #2b313b;             /* ← opac (mateix que head) */
  backdrop-filter: none !important;
  overflow: hidden;                 /* talla el que “floti” */
  box-shadow: 10px 0 18px rgba(0,0,0,.45); /* separació neta */
}

/* Cel·la top-left (intersecció Planta + mesos): màxima prioritat */
.pg .head.rowhead,
.pg .rowhead.head{
  z-index: 80;
  background: #2b313b;
}

/* 2) Opcional: evita “bleed” per GPU en alguns Android */
.pg{
  transform: translateZ(0);
}
/* ===== Poda: columna “Planta” més estreta i mobile-friendly ===== */

/* 1) Ample base més estret (desktop/tablet) */
.pg{
  grid-template-columns: 220px repeat(12, 1fr);
}

/* 2) En mòbil, encara més estreta + una mica menys padding */
@media (max-width: 720px){
  .pg{
    grid-template-columns: 170px repeat(12, 1fr);
    min-width: 760px; /* evita que quedi tot massa “apretat” */
  }

  .cell{
    padding: 10px 10px;
  }

  .cell.rowhead{
    padding: 10px 10px;
  }

  /* Texts de la planta més compactes */
  .plant-name{
    font-size: 14px;
    line-height: 1.15;
  }
  .plant-note{
    font-size: 11px;
    line-height: 1.25;
  }

  /* Botó Info més petit */
  .plant-info-btn{
    padding: 5px 8px;
    font-size: 11px;
  }
}

/* 3) En mòbil petit (<=390px), encara més */
@media (max-width: 390px){
  .pg{
    grid-template-columns: 150px repeat(12, 1fr);
  }
}
