<!-- agricola-historic.html -->
<!doctype html>
<html lang="ca">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <meta name="theme-color" content="#0b1220">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="MeteoValls">

  <title>MeteoValls Â· AgrÃ­cola histÃ²ric Â· Valls (Alt Camp)</title>
  <meta name="description" content="HistÃ²ric agrÃ­cola diari (D1): ET0, ETc, GDD, VPD i pluja a Valls (Alt Camp).">
  <link rel="canonical" href="https://meteocandela.cat/agricola-historic.html">
  <meta name="robots" content="index,follow">

  <link rel="icon" type="image/png" sizes="32x32" href="./favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./favicon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="./apple-touch-icon.png">
  <link rel="manifest" href="./site.webmanifest">

  <link rel="stylesheet" href="./style.css?v=2026-02-19-001">
  <script defer src="./vendor/chart.umd.min.js"></script>
</head>

<body data-page="agricola_historic">
  <header class="hero">
    <div class="hero__overlay"></div>
    <div class="hero__content">
      <h1>MeteoValls Â· AgrÃ­cola histÃ²ric</h1>
      <p id="lastUpdated" aria-live="polite">Carregantâ€¦</p>
      <p id="statusLine" class="status" aria-live="polite">â€”</p>
    </div>
  </header>

  <main class="grid">

    <section class="card span2">
      <nav class="quick-nav" aria-label="NavegaciÃ³ principal">
        <a href="/index.html" class="quick-nav__btn">ğŸ  MeteoValls</a>
        <a href="/agricola.html" class="quick-nav__btn">ğŸšœ AgrÃ­cola (temps real)</a>
      </nav>
    </section>

    <!-- CARD: Resum i perÃ­ode (SCOPED) -->
    <section class="card span2" id="cardAgroHistoric">
      <div class="card-head">
        <h2>Resum i perÃ­ode</h2>
        <div class="pill" id="sourceLine">Font: D1 (resum diari)</div>
      </div>

      <div class="chips-grid">
        <div class="chip">
          <span>ğŸ“… PerÃ­ode</span>
          <strong style="display:flex; gap:8px; align-items:center;">
            <select id="rangeValue" class="select" aria-label="Quantitat">
              <option value="30">30</option>
              <option value="45">45</option>
              <option value="60">60</option>
              <option value="90">90</option>
              <option value="120">120</option>
              <option value="180">180</option>
              <option value="365" selected>365</option>
              <option value="730">730</option>
              <option value="1825">1825</option>
            </select>

            <select id="rangeUnit" class="select" aria-label="Unitat">
              <option value="days" selected>dies</option>
              <option value="months">mesos</option>
              <option value="years">anys</option>
            </select>
          </strong>
        </div>

        <div class="chip">
          <span>ğŸŒ± Kc</span>
          <strong>
            <select id="kcSelect" class="select" aria-label="Kc cultiu">
              <option value="0.30">0.30 (sÃ²l nu / hivern)</option>
              <option value="0.45">0.45 (vinya inici)</option>
              <option value="0.70" selected>0.70 (vinya mitja)</option>
              <option value="0.85">0.85 (horta activa)</option>
              <option value="1.00">1.00 (referÃ¨ncia)</option>
            </select>
          </strong>
        </div>

        <div class="chip">
          <span>ğŸŒ¡ï¸ Base GDD</span>
          <strong>
            <select id="gddBase" class="select" aria-label="Base GDD">
              <option value="5">5 Â°C</option>
              <option value="10" selected>10 Â°C</option>
              <option value="12">12 Â°C</option>
            </select>
          </strong>
        </div>
      </div>

      <div class="kpi-grid" style="margin-top:12px;">
        <div class="kpi">
          <div class="kpi-val" id="kpiEt0Sum">â€”</div>
          <div class="kpi-lab">ET0 acumulada (mm)</div>
        </div>

        <div class="kpi">
          <div class="kpi-val" id="kpiEtcSum">â€”</div>
          <div class="kpi-lab">ETc acumulada (mm)</div>
        </div>

        <div class="kpi">
          <div class="kpi-val" id="kpiRainSum">â€”</div>
          <div class="kpi-lab">Pluja acumulada (mm)</div>
        </div>

        <div class="kpi">
          <div class="kpi-val" id="kpiGddSum">â€”</div>
          <div class="kpi-lab">GDD acumulats</div>
        </div>

        <div class="kpi kpi--wide-left">
          <div class="kpi-val" id="kpiVpd16Days">â€”</div>
          <div class="kpi-lab">Dies amb VPD&gt;1.6 (hores &gt; 0)</div>
        </div>

        <div class="kpi kpi--wide-right">
          <div class="kpi-val" id="kpiLastDay">â€”</div>
          <div class="kpi-lab">Ãšltim dia amb dades (D1)</div>
        </div>
      </div>
    </section>

    <section class="card chart-box span2">
      <h2>ET0 / ETc (diari)</h2>
      <canvas id="chartEtDaily"></canvas>
    </section>

    <section class="card chart-box span2">
      <h2>GDD (diari)</h2>
      <canvas id="chartGddDaily"></canvas>
    </section>

    <section class="card chart-box span2">
      <h2>VPD (hores per dia)</h2>
      <canvas id="chartVpdHours"></canvas>
    </section>

    <section class="card chart-box span2">
      <h2>Pluja (mm/dia)</h2>
      <canvas id="chartRainDaily"></canvas>
    </section>

    <section class="card span2" id="detailCard">
      <div class="card-head">
        <h2>Detall del dia</h2>
        <div class="pill" id="detailDate">â€”</div>
      </div>
      <div class="kpi-grid">
        <div class="kpi">
          <div class="kpi-val" id="dEt0">â€”</div>
          <div class="kpi-lab">ET0 (mm)</div>
        </div>
        <div class="kpi">
          <div class="kpi-val" id="dEtc">â€”</div>
          <div class="kpi-lab">ETc (mm)</div>
        </div>
        <div class="kpi">
          <div class="kpi-val" id="dGdd">â€”</div>
          <div class="kpi-lab">GDD</div>
        </div>
        <div class="kpi">
          <div class="kpi-val" id="dRain">â€”</div>
          <div class="kpi-lab">Pluja (mm)</div>
        </div>

        <div class="kpi kpi--wide-left">
          <div class="kpi-val" id="dTemp">â€”</div>
          <div class="kpi-lab">Tmin / Tmax / Tavg (Â°C)</div>
        </div>

        <div class="kpi kpi--wide-right">
          <div class="kpi-val" id="dVpd">â€”</div>
          <div class="kpi-lab">VPD avg / max (kPa) Â· h&gt;1.2 Â· h&gt;1.6</div>
        </div>
      </div>
    </section>

  </main>

  <footer class="footer">
    <span>Â© <span id="year"></span> MeteoValls</span>
  </footer>

  <script type="module" src="./app.js?v=2026-02-19-001"></script>
</body>
</html>
